# 第一周学习笔记总结

## 调试错误日志

​	在编译源码的时候中间难免会有一些错误，尤其是在安装Nginx的时候，安装完自己的虚拟机之后就寻思给自己的服务器也再配一下Nginx，去年的时候我就配置过Nginx，但是之前修改的配置文件的地方不多，大多数情况的页面都可以通过静态文件的形式进行代理，只需要把对应的文件放入html文件夹下通过对应的文件夹路径进行访问。但是在一些情况下比如代理大型的web项目的时候，静态资源文件夹的入口``index.html``文件一般会存放在``webuser``之类的文件夹中，但是在访问服务器的时候要想访问``index.html``文件，路径就需要写成``http://localhost:3000/projetName/webuser/``，这样写很不雅观，所以我打算通过配置``conf/nginx.conf``文件进行代理，其中碰到了不少的问题，也学到了不少知识。

#### 修改nginx.conf

​	我们的目的是访问特定的路径能够访问特定的文件夹中的文件，比如，我的项目文件夹名称是``chat``，该项目文件存放在``nginx/html``下，web文件资源存放在``/chat/webuser``中，我们通过修改配置文件实现访问``http://localhost:3000/chats``能够显示出``/chat/webuser/index.html``。

**配置规则**

Nginx的``location``路径匹配有多种不同的匹配规则，配置之前我先去了解了一下location的配置规则。

因为是访问特定路径，所以我采用的是精确匹配的方式，并且因为实际访问路径与URL没有相同路径，所以用的是alias规则。

> root 实际访问文件路径会拼接URL中的路径
>
> alias 实际访问文件路径不会拼接URL中的路径，会把location后面配置的路径丢弃掉，把当前匹配到的目录指向到指定的目录

```
location = /chats {
	alias html/chat/websuer;
	index index.html;
}
```

注意：

	1. 使用alias，目录名后面一定要加“/”。
 	2. alias在使用正则匹配时，必须精确捕捉要匹配的内容并在指定的内容处使用。
 	3. alias只能位于location块中，root可以不放在location中。

**当然这之后最后的总结**，一开始配置的时候并不知道这个，中间也出现了很多的问题，也学会了怎么调试问题。

一开始配置完之后并不能正常访问，会提示404，所以我就去查看错误日志。

首先在配置文件中添加输出日志文件的路径。默认开启后在``log/··目录中，为了实时监控输出日志，使用如下命令

```
tail -f [error.log]
```

该命令可以实时显示文件中的内容到stdout中，为了一边监控日志文件一边修改配置文件，我就另起了一个ssh界面去修改配置文件。

经过一段时间调试之后，终于完成了调试，期间服务器卡了点bug，重启了之后才把配置文件生效。

这个过程不算太难，但是确实是由大佬相助我才学会了方便快捷的调试方法。

#### 环境变量配置

